<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L·ªãch C√¥ng Gi√°o</title>

    <style>
    /* Phong c√°ch chung cho to√†n trang */
    body {
        font-family: Arial, sans-serif;
        background-color: #f5f5f5;
        margin: 0;
        padding: 0;
        color: #333;
    }

    /* Header */
    .calendar-header {
        background-color: #007bff;
        color: white;
        padding: 15px;
        text-align: center;
        font-size: 24px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    /* Container ch√≠nh */
    .calendar-content {
        background-color: white;
        border-radius: 15px;
        margin: 20px auto;
        padding: 20px;
        max-width: 900px;
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        text-align: center;
    }

    /* ƒê·ªãnh d·∫°ng ph·∫ßn ng√†y l·ªõn v√† ng√†y nh·ªè */
    .reading-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 15px;
        padding: 10px 0;
    }

    .date-large {
        font-size: 150px;
        color: red;
        text-align: center;
        margin: -5px;
        line-height: 0.9;
        font-weight: bold;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .weekday {
        margin-left: 100px;
        font-size: 20px;
        font-weight: bold;
        color: #2196F3;
    }

    .lunar-date {
        margin-right: 100px;
        font-size: 20px;
        font-weight: normal;
        color: #ff0000;
    }

    .date-small {
        font-size: 18px;
        color: #3506f0;
        margin: 0;
        font-weight: bold;
    }

    /* CƒÉn ch·ªânh th√¥ng tin l·ªÖ v√† b√†i ƒë·ªçc */
    .feast-info-container {
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
        gap: 15px;
        margin-top: 15px;
    }

    .feast-info {
        font-size: 18px;
        margin: 0;
    }

    /* ƒê·ªãnh d·∫°ng ph·∫ßn b√†i ƒë·ªçc */
    .readings {
        margin: 10px 0;
        text-align: center;
        font-size: 16px;
        line-height: 1.5;
    }

    .readings div {
        margin-bottom: 8px;
    }

    /* Footer */
    .bottom-nav {
        display: flex;
        justify-content: space-around;
        background-color: #007bff;
        color: white;
        padding: 15px;
        position: fixed;
        width: 100%;
        bottom: 0;
        box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
    }

    .bottom-nav div {
        text-align: center;
        cursor: pointer;
    }

    .bottom-nav div:hover {
        background-color: #0056b3;
    }

    /* B·∫£ng hi·ªÉn th·ªã th√¥ng tin */
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 30px;
    }

    table, th, td {
        border: 1px solid black;
    }

    th, td {
        padding: 10px;
        text-align: center;
    }

    th {
        background-color: #f2f2f2;
        font-weight: bold;
    }

    /* M√†u n·ªÅn theo m√†u √°o l·ªÖ */
    .bg-Tr { background-color: white; }
    .bg-Tm { background-color: #d8bfd8; }
    .bg-ƒê { background-color: #ff0000; }
    .bg-X { background-color: lightgreen; }
    
    .week-separator {
        height: 1px;
        border-top: 10px solid #ccc;
    }
    .bg-ƒê { 
    background-color: #ff0000; /* M√†u n·ªÅn ƒë·ªè */
    color: white;              /* M√†u ch·ªØ tr·∫Øng */
}

    .image-container {
        text-align: center;
        margin-bottom: 0px;
    }

    .image-container img {
        width: 130px;
        height: 130px;
        border-radius: 50%;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    }

    /* ƒê·ªãnh d·∫°ng vƒÉn b·∫£n ƒë·∫∑c bi·ªát */
    .info {
        color: #020e5f;
        font-weight: bold;
        font-style: italic;
        background-color: #94faf3;
        padding: 10px;
        border-radius: 5px;
    }

    /* Modal (h·ªôp tho·∫°i) */
    .modal {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 1000;
        background-color: #f5f7b3;
        padding: 30px;
        box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.3);
        width: 80%;
        max-width: 700px;
        max-height: 80%;
        overflow-y: auto;
        border-radius: 10px;
    }
    /* ·∫®n d·∫•u X trong modal */
.modal .close {
    display: none;
}

    .modal-content {
        padding: 20px;
        text-align: center;
    }

    .close:focus {
        color: #000;
        text-decoration: none;
        cursor: pointer;
    }

    /* Overlay (n·ªÅn m·ªù) */
    .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 999;
    }

    /* Hi·ªÉn th·ªã modal v√† overlay */
    .modal.show, .overlay.show {
        display: block;
    }

    /* CƒÉn ch·ªânh c√°c n√∫t c·ªë ƒë·ªãnh b√™n tr√°i m√†n h√¨nh */
    .vertical-buttons {
        position: sticky;
        top: 10px;
        left: 5px;
        display: flex;
        flex-direction: row;
        gap: 10px;
        z-index: 1001;
    }

 .icon-button {
    background-color: transparent; /* ƒê·∫£m b·∫£o n√∫t trong su·ªët */
    border: none;
    cursor: pointer;
    padding: 10px;
    font-size: 24px;
    font-weight: bold;
    color: #d18a78; /* M√†u c·ªßa vƒÉn b·∫£n, b·∫°n c√≥ th·ªÉ thay ƒë·ªïi m√†u n·∫øu c·∫ßn */
    border-radius: 50%;
    transition: background-color 0.3s ease;
}

/* Khi di chu·ªôt qua n√∫t */
.icon-button:hover {
    background-color: transparent; /* ƒê·∫£m b·∫£o kh√¥ng c√≥ m√†u n·ªÅn xanh */
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); /* B·∫°n c√≥ th·ªÉ ƒëi·ªÅu ch·ªânh */
}

    br {
        line-height: 2;
    }

    .readable {
        cursor: pointer;
        transition: color 0.3s ease;
    }

    .readable:hover {
        color: blue;
        font-weight: bold;
    }

    /* ƒê·ªãnh d·∫°ng cho c√°c t√™n l·ªÖ */
    .feast-bold {
        font-weight: bold;
    }

    /* Container chung cho ph·∫ßn ch·ªçn ng√†y v√† c√°c n√∫t */
    .controls-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 10px;
        padding: 10px;
        flex-wrap: nowrap;
    }

    input[type="date"], input[type="number"], select, button {
        padding: 8px;
        font-size: 16px;
        border-radius: 5px;
        border: 1px solid #ccc;
        width: fit-content;
    }

    button {
        background-color: #007BFF;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 4px;
        font-size: 16px;
    }

    button:hover {
        background-color: #0056b3;
    }
    .desktop-controls {
    display: flex;
    justify-content: space-around; /* Chia ƒë·ªÅu kh√¥ng gian cho c√°c ph·∫ßn t·ª≠ */
    align-items: center; /* CƒÉn gi·ªØa theo chi·ªÅu d·ªçc */
    gap: 10px; /* Kho·∫£ng c√°ch gi·ªØa c√°c ph·∫ßn t·ª≠ */
    padding: 10px; /* Kho·∫£ng c√°ch xung quanh */
}

.desktop-controls input{
    flex: 1; /* M·ªói ph·∫ßn t·ª≠ s·∫Ω chi·∫øm m·ªôt ph·∫ßn kh√¥ng gian b·∫±ng nhau */
    max-width: 70px; /* Gi·ªõi h·∫°n chi·ªÅu r·ªông t·ªëi ƒëa cho c√°c n√∫t v√† input */
} 

.desktop-controls select{
    flex: 1; /* M·ªói ph·∫ßn t·ª≠ s·∫Ω chi·∫øm m·ªôt ph·∫ßn kh√¥ng gian b·∫±ng nhau */
    max-width: 200px; /* Gi·ªõi h·∫°n chi·ªÅu r·ªông t·ªëi ƒëa cho c√°c n√∫t v√† input */
}

.desktop-controls button {
    flex: none; /* M·ªói ph·∫ßn t·ª≠ s·∫Ω chi·∫øm m·ªôt ph·∫ßn kh√¥ng gian b·∫±ng nhau */
    max-width: 150px; /* Gi·ªõi h·∫°n chi·ªÅu r·ªông t·ªëi ƒëa cho c√°c n√∫t v√† input */
}

.desktop-controls button {
    padding: 8px 12px; /* ƒêi·ªÅu ch·ªânh k√≠ch th∆∞·ªõc n√∫t */
}



    /* ·∫®n c√°c bi·ªÉu t∆∞·ª£ng tr√™n m√°y t√≠nh */
.mobile-controls {
    display: none;
}
    /* Hi·ªÉn th·ªã bi·ªÉu t∆∞·ª£ng tr√™n thi·∫øt b·ªã di ƒë·ªông */
@media (max-width: 768px) {
    .mobile-controls {
        display: flex;
        justify-content: space-around;
        gap: 10px;
    }

    .desktop-controls {
        display: none; /* ·∫®n c√°c tr∆∞·ªùng ch·ªçn b√¨nh th∆∞·ªùng tr√™n ƒëi·ªán tho·∫°i */
    }

  
}


    </style>

    <!-- T√≠ch h·ª£p c√°c t·ªáp JS -->
    <script src="js/saintcelebration.js"></script>
    <script src="js/calculateLunarSolar.js"></script>
    <script src="js/calculateChasuble.js"></script>
    <script src="js/calculateFeasts.js"></script>
    <script src="js/calculateBasic.js"></script>
    <script src="js/calculatenumberSunday.js"></script>
    <script src="js/calculatenumberSecondary.js"></script>
    <script src="js/calculateReading.js"></script>
    <script src="Reading/Sunday.js"></script>
    <script src="js/calculatebibleReads.js"></script>
    <script src="Reading/DailySeason.js"></script>
    <script src="Reading/DailyOrdinary1.js"></script>
    <script src="Reading/DailyOrdinary2.js"></script>
    <script src="Reading/SaintsBible.js"></script>
    <script src="Reading/Optionsaint.js"></script>
    <script src="js/secondfeast.js"></script>
    <script src="js/calculateOptionbibleReads.js"></script>
</head>

<body>

<!-- Ph·∫ßn Header -->
<header class="calendar-header">
    L·ªäCH PH·ª§NG V·ª§ C√îNG GI√ÅO
</header>

<!-- Modal -->
<div id="readingModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span> <!-- N√∫t ƒë√≥ng modal -->
        <h3>B√†i ƒê·ªçc Ng√†y L·ªÖ</h3>
        <div class="vertical-buttons">
            <button class="icon-button" onclick="increaseFontSize()">+</button>
            <button class="icon-button" onclick="decreaseFontSize()">-</button>
            <button class="icon-button" onclick="quitModal()">Close</button>
            <button class="icon-button" onclick="boldText()">B</button>
        </div>
        <div id="readingContent"></div>
    </div>
</div>

<!-- Overlay -->
<div id="modalOverlay" class="overlay" onclick="closeModal()"></div>

<!-- N·ªôi dung ch√≠nh -->
<div class="calendar-content">
    <div class="image-container">
        <img src="01.webp" alt="Maria v√† Ch√∫a Gi√™su">
    </div>

    <!-- Th√¥ng tin l·ªÖ v√† b√†i ƒë·ªçc -->
    <div class="details" id="detailsSection">
        <div class="feast-info-container">
            <p class="feast-info" id="feast-info"></p>
        </div>
        <p class="readings">
            <span id="reading1"></span> <span id="psalm"></span>
            <span id="reading2"></span> <span id="gospel"></span>
        </p>
        <p class="info">
            <span id="info"></span>
        </p>
        <div>
            <p id="second-feast-info"></p>
        </div>
        <div>
            <p id="optional-reading"></p>
            <div class="reading-row">
                <div class="weekday" id="weekday">TH·ª® HAI</div>
                <p class="date-large" id="current-date">1</p>
                <div class="lunar-date" id="lunarDate">AL: 1/2</div>
            </div>
            <p class="date-small" id="current-month-year"></p>
        </div>
    </div>

    
<!-- Ch·ªçn ng√†y, tu·∫ßn v√† th√°ng v·ªßa mobi -->
<div class="controls-container">
    <!-- Bi·ªÉu t∆∞·ª£ng cho ƒëi·ªán tho·∫°i -->
    <div class="mobile-controls">
        <button class="icon-button" onclick="toggleDatePicker()">Ng√†y üìÖ</button> <!-- Bi·ªÉu t∆∞·ª£ng ch·ªçn ng√†y -->
        <button class="icon-button" onclick="toggleWeekPicker()">Tu·∫ßn üß≠</button> <!-- Bi·ªÉu t∆∞·ª£ng ch·ªçn tu·∫ßn -->
        <button class="icon-button" onclick="toggleMonthPicker()">Th√°ng üóì</button> <!-- Bi·ªÉu t∆∞·ª£ng ch·ªçn th√°ng/nƒÉm -->
    </div>

    <!-- C√°c tr∆∞·ªùng ch·ªçn ng√†y, th√°ng, nƒÉm cho thi·∫øt b·ªã l·ªõn -->
    <div class="desktop-controls">

        <button>Ng√†y : </button>
        <input type="date" id="inputDate" onchange="getFeastForSelectedDate()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        
        <!-- Ch·ªçn tu·∫ßn hi·ªán t·∫°i, tu·∫ßn tr∆∞·ªõc, ho·∫∑c tu·∫ßn t·ªõi -->
        <button onclick="displayWeekInfo('previous')">‚èÆ</button>
        <button onclick="displayWeekInfo('current')">Tu·∫ßn Hi·ªán T·∫°i</button>
        <button onclick="displayWeekInfo('next')">‚è≠</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      

        <button onclick="displayMonthInfo()">L·ªãch Th√°ng : </button>
        <select id="monthInput">
            <option value="1">Th√°ng 1</option>
            <option value="2">Th√°ng 2</option>
            <option value="3">Th√°ng 3</option>
            <option value="4">Th√°ng 4</option>
            <option value="5">Th√°ng 5</option>
            <option value="6">Th√°ng 6</option>
            <option value="7">Th√°ng 7</option>
            <option value="8">Th√°ng 8</option>
            <option value="9">Th√°ng 9</option>
            <option value="10">Th√°ng 10</option>
            <option value="11">Th√°ng 11</option>
            <option value="12">Th√°ng 12</option>
        </select>
        <input type="number" id="yearInput" value="2024">
       </div>
</div>

<!-- Modal ch·ªçn ng√†y -->
<div id="datePickerModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeDatePicker()">&times;</span>
        <h3>Ch·ªçn ng√†y</h3>
        <!-- G·ªçi h√†m displayDateInfo khi ng∆∞·ªùi d√πng ch·ªçn ng√†y -->
        <input type="date" id="mobileInputDate" onchange="displayDateInfo(this.value)">
        <!-- N√∫t ƒë√≥ng modal n·∫øu c·∫ßn -->
        <button onclick="quitModal()">Close</button>
    </div>
</div>

<!-- Modal ch·ªçn tu·∫ßn mobi-->
<div id="weekPickerModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeWeekPicker()">&times;</span>
        <h3>Ch·ªçn tu·∫ßn</h3>
        <!-- Hi·ªÉn th·ªã th√¥ng tin tu·∫ßn -->
        <button onclick="displayWeekInfo('previous')">‚èÆ</button>
        <button onclick="displayWeekInfo('current')">Tu·∫ßn Hi·ªán T·∫°i</button>
        <button onclick="displayWeekInfo('next')">‚è≠</button>
        <button onclick="quitModal()">Close</button> <!-- ƒê√≥ng modal -->
    </div>
</div>

<!-- Modal ch·ªçn Th√°nh mobi-->
<div id="monthPickerModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeMonthPicker()">&times;</span>
        <h3>Ch·ªçn th√°ng v√† nƒÉm</h3>

        <!-- Khi ng∆∞·ªùi d√πng thay ƒë·ªïi th√°ng, t·ª± ƒë·ªông g·ªçi h√†m displayMonthInfo -->
        <select id="mobileMonthInput" onchange="displayMonthInfo(document.getElementById('mobileMonthInput').value, document.getElementById('mobileYearInput').value)">
            <option value="1">Thg 1</option>
            <option value="2">Thg 2</option>
            <option value="3">Thg 3</option>
            <option value="4">Thg 4</option>
            <option value="5">Thg 5</option>
            <option value="6">Thg 6</option>
            <option value="7">Thg 7</option>
            <option value="8">Thg 8</option>
            <option value="9">Thg 9</option>
            <option value="10">Thg 10</option>
            <option value="11">Thg 11</option>
            <option value="12">Thg 12</option>
        </select>

        <!-- Khi ng∆∞·ªùi d√πng thay ƒë·ªïi nƒÉm, t·ª± ƒë·ªông g·ªçi h√†m displayMonthInfo -->
        <input type="number" id="mobileYearInput" value="2024" onchange="displayMonthInfo(document.getElementById('mobileMonthInput').value, this.value)">

        <!-- N√∫t ƒë√≥ng modal -->
        <button onclick="quitModal()">Close</button>
    </div>
</div>




    <!-- B·∫£ng hi·ªÉn th·ªã th√¥ng tin -->
    <h2>L·ªãch Ph·ª•ng V·ª• <span id="yearDisplay"></span></h2>
    <table>
        <thead>
            <tr>
                <th>Ng√†y</th>
                <th>M√†u</th>
                <th>Th√¥ng tin Ng√†y L·ªÖ v√† B√†i ƒê·ªçc</th>
            </tr>
        </thead>
        <tbody id="reportTableBody">
            <!-- N·ªôi dung s·∫Ω ƒë∆∞·ª£c ch√®n ƒë·ªông v√†o ƒë√¢y -->
        </tbody>
    </table>
</div>

</body>
</html>

<script>

// H√†m m·ªü/ƒë√≥ng modal ch·ªçn ng√†y
function toggleDatePicker() {
    var modal = document.getElementById('datePickerModal');
    var displayStatus = modal.style.display === 'block' ? 'none' : 'block';
    modal.style.display = displayStatus;
    toggleOverlay(displayStatus); // ƒêi·ªÅu khi·ªÉn overlay
}

// H√†m m·ªü/ƒë√≥ng modal ch·ªçn tu·∫ßn
function toggleWeekPicker() {
    var modal = document.getElementById('weekPickerModal');
    var displayStatus = modal.style.display === 'block' ? 'none' : 'block';
    modal.style.display = displayStatus;
    toggleOverlay(displayStatus); // ƒêi·ªÅu khi·ªÉn overlay
}

// H√†m m·ªü/ƒë√≥ng modal ch·ªçn th√°ng/nƒÉm (c√≥ th·ªÉ th√™m modal cho th√°ng/nƒÉm n·∫øu c·∫ßn)
function toggleMonthPicker() {
    var modal = document.getElementById('monthPickerModal');
    if (modal) {
        var displayStatus = modal.style.display === 'block' ? 'none' : 'block';
        modal.style.display = displayStatus;
        toggleOverlay(displayStatus); // ƒêi·ªÅu khi·ªÉn overlay
    }
}

// H√†m ·∫©n overlay v√† c√°c modal
function quitModal() {
    var modals = document.querySelectorAll('.modal');
    modals.forEach(function(modal) {
        modal.style.display = 'none';
    });
    toggleOverlay('none'); // ·∫®n overlay khi ƒë√≥ng t·∫•t c·∫£ modal
}

// H√†m m·ªü/ƒë√≥ng overlay
function toggleOverlay(displayStatus) {
    var overlay = document.getElementById('modalOverlay');
    if (overlay) {
        overlay.style.display = displayStatus;
    }
}

// C√°c h√†m ƒë√≥ng t·ª´ng modal
function closeDatePicker() {
    document.getElementById('datePickerModal').style.display = 'none';
    toggleOverlay('none'); // ·∫®n overlay
}

function closeWeekPicker() {
    document.getElementById('weekPickerModal').style.display = 'none';
    toggleOverlay('none'); // ·∫®n overlay
}

function getWeekday(date) {
        const days = ["CH√öA NH·∫¨T", "TH·ª® HAI", "TH·ª® BA", "TH·ª® T∆Ø", "TH·ª® NƒÇM", "TH·ª® S√ÅU", "TH·ª® B·∫¢Y"];
        return days[date.getDay()];
    }

    function getMonthName(date) {
        const months = [
            "TH√ÅNG M·ªòT", "TH√ÅNG HAI", "TH√ÅNG BA", "TH√ÅNG T∆Ø", "TH√ÅNG NƒÇM", "TH√ÅNG S√ÅU",
            "TH√ÅNG B·∫¢Y", "TH√ÅNG T√ÅM", "TH√ÅNG CH√çN", "TH√ÅNG M∆Ø·ªúI", "TH√ÅNG M∆Ø·ªúI M·ªòT", "TH√ÅNG M∆Ø·ªúI HAI"
        ];
        return months[date.getMonth()];
}
// l√†m sao t√¥i c·∫≠p nh·∫≠t getWeekday(date) v√† getMonthName(date) v√†o h√†m sau

function displayDateInfo(date) {
    const selectedDate = date ? new Date(date) : new Date(); // S·ª≠ d·ª•ng ng√†y ƒë√£ ch·ªçn ho·∫∑c ng√†y hi·ªán t·∫°i
    const year = selectedDate.getFullYear();
    const month = selectedDate.getMonth() + 1;
    const day = selectedDate.getDate();

// S·ª≠ d·ª•ng c√°c h√†m getWeekday v√† getMonthName ƒë·ªÉ l·∫•y th·ª© v√† th√°ng
const weekday = getWeekday(selectedDate);  // L·∫•y th·ª© trong tu·∫ßn
const monthName = getMonthName(selectedDate);  // L·∫•y t√™n th√°ng

// L·∫•y ng√†y Ch√∫a Nh·∫≠t ƒë·∫ßu ti√™n c·ªßa M√πa V·ªçng trong nƒÉm hi·ªán t·∫°i
const firstSundayOfAdvent = getFirstSundayOfAdvent(year);

// Ki·ªÉm tra xem ng√†y hi·ªán t·∫°i c√≥ sau Ch√∫a Nh·∫≠t ƒë·∫ßu ti√™n c·ªßa M√πa V·ªçng kh√¥ng
let liturgicalYear = getLiturgicalYear(year);
if (selectedDate >= firstSundayOfAdvent) {
    // N·∫øu sau Ch√∫a Nh·∫≠t ƒë·∫ßu ti√™n c·ªßa M√πa V·ªçng, c·ªông th√™m 1 cho nƒÉm ph·ª•ng v·ª•
    liturgicalYear = getLiturgicalYear(year + 1);
}

// Hi·ªÉn th·ªã th·ª© trong tu·∫ßn, ng√†y v√† th√°ng/nƒÉm ph·ª•ng v·ª•
document.getElementById("weekday").textContent = weekday; // Hi·ªÉn th·ªã th·ª© trong tu·∫ßn
document.getElementById("current-date").textContent = day; // Hi·ªÉn th·ªã ng√†y
document.getElementById("current-month-year").textContent = `${monthName} - ${year} NƒÇM ${liturgicalYear}`; // Hi·ªÉn th·ªã th√°ng/nƒÉm v√† nƒÉm ph·ª•ng v·ª•

    // Chuy·ªÉn ƒë·ªïi ng√†y √¢m l·ªãch
    const lunarDate = convertToLunarDate({ day, month, year });

    // L·∫•y can chi sau khi c√≥ ng√†y √¢m l·ªãch
    const lunarNewYearArray = getSolarDate(lunarDate.day, lunarDate.month, year); // L·∫•y m·∫£ng tr·∫£ v·ªÅ (ng√†y, th√°ng)
    const lunarNewYear = new Date(year, lunarNewYearArray[1] - 1, lunarNewYearArray[0]); // S·ª≠ d·ª•ng ng√†y v√† th√°ng t·ª´ m·∫£ng, th√™m nƒÉm
    const canChi = getYearCanChi(lunarNewYear.getFullYear()); // T√≠nh can chi c·ªßa nƒÉm √¢m l·ªãch

    // Hi·ªÉn th·ªã ng√†y √¢m l·ªãch (AL) v√† can chi trong ph·∫ßn t·ª≠ `lunarDate`

    document.getElementById("lunarDate").innerHTML = `AL: ${lunarDate.day}/${lunarDate.month}<br>${canChi}`;


    // L·∫•y th√¥ng tin l·ªÖ v√† b√†i ƒë·ªçc
    const feasts = calculateFeasts(year);
    const secondFeasts = calculateSecondFeasts(year); // L·∫•y c√°c l·ªÖ v·ªçng
    const feast = getFeastForDay(selectedDate, feasts);
    document.getElementById("feast-info").innerHTML = feast ? formatFeastName(feast.name) : 'Kh√¥ng c√≥ l·ªÖ ƒë·∫∑c bi·ªát';

    const readingContent = showfordayContent(selectedDate)?.split('; ') || [];
    const info = showfordayContentinfo(selectedDate);

    const solarDate = selectedDate.toISOString();

    // Hi·ªÉn th·ªã th√¥ng tin b√†i ƒë·ªçc
    updateReadingInfo(info, readingContent, solarDate);

    // T√≠nh to√°n v√† th√™m l·ªÖ v·ªçng (second feast)
    const secondFeast = getSecondFeastsForDate(selectedDate, secondFeasts); // Tr·∫£ v·ªÅ m·ªôt ƒë·ªëi t∆∞·ª£ng ho·∫∑c null
    document.getElementById("second-feast-info").innerHTML = secondFeast
        ? formatFeastName(secondFeast.name)
        : '';

   // L·∫•y th√¥ng tin b√†i ƒë·ªçc ph·ª• v√† c·∫≠p nh·∫≠t ch·ªâ khi c√≥ gi√° tr·ªã
   const reading1 = showOptionContent(selectedDate);
    if (reading1 && reading1.trim() !== "") {
        updateOptionalReadingInfo(reading1, secondFeast);
    } else {
        document.getElementById("optional-reading").textContent = ''; // X√≥a th√¥ng tin b√†i ƒë·ªçc ph·ª• n·∫øu kh√¥ng c√≥ gi√° tr·ªã
    }
}




function updateOptionalReadingInfo(reading1, solarDate) {

    // Ki·ªÉm tra n·∫øu b√†i ƒë·ªçc ph·ª• t·ªìn t·∫°i v√† kh√°c "1"
    if (reading1 && reading1 !== "1") {

        // X√°c ƒë·ªãnh ph·∫ßn t·ª≠ HTML cho b√†i ƒë·ªçc ph·ª•
        const optionalReadingContainer = document.getElementById("optional-reading");
        if (!optionalReadingContainer) {
            return;
        }
        // C·∫≠p nh·∫≠t n·ªôi dung b√†i ƒë·ªçc ph·ª•
        optionalReadingContainer.innerHTML = `
            <div class="readable" id="optional-content">
                <strong>${reading1 || ''}</strong>
            </div>`;

        // G√°n s·ª± ki·ªán onclick cho ph·∫ßn t·ª≠ v·ª´a t·∫°o
        const optionalContent = document.getElementById("optional-content");
        if (optionalContent) {
            optionalContent.addEventListener('click', function() {
                try {
                    // L·∫•y thu·ªôc t√≠nh `date` t·ª´ `solarDate` v√† chuy·ªÉn th√†nh chu·ªói
                    const dateStr = solarDate.date.toISOString();
                    showBibleOptionContent(dateStr); // Truy·ªÅn chu·ªói ƒë·ªãnh d·∫°ng ng√†y
                } catch (error) {
                }  
            });
        }

        // N·∫øu reading1 l√† m·∫£ng, x·ª≠ l√Ω hi·ªÉn th·ªã th√™m n·ªôi dung b√†i ƒë·ªçc
        if (Array.isArray(reading1)) {
            const reading1Container = document.getElementById("reading1");
            if (!reading1Container) {
                return;
            }

            if (reading1.length === 4) {
                console.log("B√†i ƒë·ªçc c√≥ ƒë·ªô d√†i 4:", reading1);
                reading1Container.innerHTML = `
                    <div class="readable" id="reading1-content">
                        <strong>${reading1[0] || ''}</strong> ${reading1[1] || ''} 
                        ${reading1[2] || ''}<strong> ${reading1[3] || ''}
                    </div>`;
                const reading1Content = document.getElementById("reading1-content");
                if (reading1Content) {
                    reading1Content.addEventListener('click', function() {
                        try {
                            const dateStr = solarDate.date.toISOString(); // Chuy·ªÉn ng√†y th√†nh chu·ªói
                            showReadingContent(dateStr); // Truy·ªÅn chu·ªói ƒë·ªãnh d·∫°ng ng√†y
                        } catch (error) {
                        }
                    });
                }
            } else if (reading1.length === 3) {
                reading1Container.innerHTML = `
                    <div class="readable" id="reading1-content">
                        <strong>${reading1[0] || ''}</strong> ${reading1[1] || ''} 
                        <strong>${reading1[2] || ''}
                    </div>`;
                const reading1Content = document.getElementById("reading1-content");
                if (reading1Content) {
                    reading1Content.addEventListener('click', function() {
                        try {
                            const dateStr = solarDate.date.toISOString(); // Chuy·ªÉn ng√†y th√†nh chu·ªói
                            showReadingContent(dateStr); // Truy·ªÅn chu·ªói ƒë·ªãnh d·∫°ng ng√†y
                        } catch (error) {
                        }
                    });
                }
            }
        }
    } 
}



// H√†m ƒë·ªÉ c·∫≠p nh·∫≠t th√¥ng tin b√†i ƒë·ªçc 
function updateReadingInfo(info, readingContent, solarDate) {
    if (readingContent.length === 4) {
        document.getElementById("info").innerHTML = `<strong><em>${info}</em></strong>`;
        document.getElementById("reading1").innerHTML = `
            <div class="readable" onclick="showReadingContent('${solarDate}')">
                <strong>${readingContent[0] || ''}</strong> ${readingContent[1] || ''} 
                ${readingContent[2] || ''}<strong> ${readingContent[3] || ''}
            </div>`;
    } else if (readingContent.length === 3) {
        document.getElementById("info").innerHTML = `<strong><em>${info}</em></strong>`;
        document.getElementById("reading1").innerHTML = `
            <div class="readable" onclick="showReadingContent('${solarDate}')">
                <strong>${readingContent[0] || ''}</strong> ${readingContent[1] || ''} 
                <strong>${readingContent[2] || ''}
            </div>`;
    }
}


// Khi trang ƒë∆∞·ª£c t·∫£i, hi·ªÉn th·ªã th√¥ng tin ng√†y h√¥m nay
window.onload = function() {
    displayDateInfo();
};


// H√†m c·∫≠p nh·∫≠t th√¥ng tin khi ch·ªçn ng√†y t·ª´ input
function getFeastForSelectedDate() {
    const inputDate = document.getElementById('inputDate').value;
    if (!inputDate) {
        alert('Vui l√≤ng ch·ªçn m·ªôt ng√†y.');
        return;
    }
    displayDateInfo(inputDate); // C·∫≠p nh·∫≠t th√¥ng tin d·ª±a tr√™n ng√†y ƒë√£ ch·ªçn
}

// Hi·ªÉn th·ªã tu·∫ßn ph·ª•ng v·ª•
function displayWeekInfo(weekType) {
    const today = new Date();
    let startOfWeek;

    // X√°c ƒë·ªãnh tu·∫ßn n√†o s·∫Ω hi·ªÉn th·ªã
    if (weekType === 'previous') {
        // Tu·∫ßn tr∆∞·ªõc
        startOfWeek = new Date(today.setDate(today.getDate() - today.getDay() - 7)); // Ch·ªß Nh·∫≠t tu·∫ßn tr∆∞·ªõc
    } else if (weekType === 'next') {
        // Tu·∫ßn t·ªõi
        startOfWeek = new Date(today.setDate(today.getDate() - today.getDay() + 7)); // Ch·ªß Nh·∫≠t tu·∫ßn t·ªõi
    } else {
        // Tu·∫ßn hi·ªán t·∫°i (default)
        startOfWeek = new Date(today.setDate(today.getDate() - today.getDay())); // Ch·ªß Nh·∫≠t tu·∫ßn n√†y
    }

    const endOfWeek = new Date(startOfWeek);
    endOfWeek.setDate(startOfWeek.getDate() + 6); // K·∫øt th√∫c v√†o Th·ª© B·∫£y

    const year = startOfWeek.getFullYear();
    const feasts = calculateFeasts(year); // L·∫•y c√°c l·ªÖ trong nƒÉm
    const secondFeasts = calculateSecondFeasts(year); // L·∫•y c√°c l·ªÖ v·ªçng

    // C·∫≠p nh·∫≠t hi·ªÉn th·ªã th√¥ng tin tu·∫ßn
    const yearDisplayElement = document.getElementById('yearDisplay');
    const startDateString = `${startOfWeek.getDate()}/${startOfWeek.getMonth() + 1}/${startOfWeek.getFullYear()}`;
    const endDateString = `${endOfWeek.getDate()}/${endOfWeek.getMonth() + 1}/${endOfWeek.getFullYear()}`;
    yearDisplayElement.textContent = `t·ª´ ng√†y ${startDateString} ƒë·∫øn ${endDateString}`;

    const reportTableBody = document.getElementById('reportTableBody');
    reportTableBody.innerHTML = ''; // X√≥a d·ªØ li·ªáu c≈© trong b·∫£ng

    let currentDay = new Date(startOfWeek); // B·∫Øt ƒë·∫ßu t·ª´ Ch·ªß Nh·∫≠t

    // Hi·ªÉn th·ªã th√¥ng tin cho t·ª´ng ng√†y trong tu·∫ßn
    for (let i = 0; i < 7; i++) {
        const year = currentDay.getFullYear();
        const month = currentDay.getMonth() + 1;
        const day = currentDay.getDate();

        // L·∫•y th√¥ng tin l·ªÖ, m√†u √°o l·ªÖ v√† b√†i ƒë·ªçc cho ng√†y hi·ªán t·∫°i
        let feastAndReadingContent = '';
        const feast = getFeastForDay(currentDay, feasts);
        const chasuble = calculateChasuble(year).getChasubleForDay(currentDay);

        // Th√™m th√¥ng tin v·ªÅ ng√†y l·ªÖ ch√≠nh
        if (feast) {
            feastAndReadingContent += formatFeastName(feast.name) + '<br>';
        } else {
            feastAndReadingContent += 'Kh√¥ng c√≥ l·ªÖ ƒë·∫∑c bi·ªát<br>';
        }

        // Th√™m b√†i ƒë·ªçc v√†o sau th√¥ng tin l·ªÖ
        const readingContent = showfordayContent(currentDay); // G·ªçi h√†m showfordayContent ƒë·ªÉ l·∫•y n·ªôi dung b√†i ƒë·ªçc
        if (readingContent) {
            feastAndReadingContent += `<div class="readable" onclick="showReadingContent('${currentDay.toISOString()}')">${readingContent}</div>`;
        } else {
            feastAndReadingContent += 'Kh√¥ng c√≥ b√†i ƒë·ªçc';  // N·∫øu kh√¥ng c√≥ b√†i ƒë·ªçc
        }

        // T√≠nh to√°n v√† th√™m l·ªÖ v·ªçng (second feast)
        const secondFeast = getSecondFeastsForDate(currentDay, secondFeasts);
        if (secondFeast) {
            feastAndReadingContent += '<br>' + formatFeastName(secondFeast.name) + '<br>';
        }

        // Th√™m b√†i ƒë·ªçc ph·ª• v√†o sau ph·∫ßn ng√†y l·ªÖ
        const reading1 = showOptionContent(currentDay); // G·ªçi h√†m showOptionContent ƒë·ªÉ l·∫•y t√™n b√†i ƒë·ªçc

        if (reading1 && reading1 !== "1") {
            feastAndReadingContent += `
                <div class="readable" onclick="showBibleOptionContent('${currentDay.toISOString()}')">
                    ${reading1}
                </div>
            `;
        }

        // T·∫°o h√†ng m·ªõi trong b·∫£ng
        const row = document.createElement('tr');

        // N·∫øu l√† Ch·ªß Nh·∫≠t, th√™m hi·ªáu ·ª©ng 3D
        if (currentDay.getDay() === 0) {
            row.classList.add('sunday');
        }

        // G√°n l·ªõp m√†u n·ªÅn cho h√†ng theo chasuble
        const chasubleClass = getChasubleClass(chasuble);
        if (chasubleClass) {
            row.classList.add(chasubleClass);
        }

        // Ng√†y d∆∞∆°ng l·ªãch v√† √¢m l·ªãch ƒë∆∞·ª£c hi·ªÉn th·ªã trong c√πng m·ªôt √¥
        const solarDateCell = document.createElement('td');
        const lunarDate = convertToLunarDate({ day, month, year });

        // Hi·ªÉn th·ªã ng√†y d∆∞∆°ng l·ªãch v·ªõi ch·ªØ ƒë·∫≠m v√† ng√†y √¢m l·ªãch v·ªõi m√†u xanh ƒë·∫≠m
        solarDateCell.innerHTML = `<strong>${day}/${month}</strong><br><em><span style="color: darkblue;">(${lunarDate.day}/${lunarDate.month})</span><em>`;
        row.appendChild(solarDateCell);

        // M√†u √°o l·ªÖ
        const chasubleCell = document.createElement('td');
        chasubleCell.textContent = chasuble || 'Xanh';
        row.appendChild(chasubleCell);

        // Th√¥ng tin l·ªÖ v√† b√†i ƒë·ªçc
        const feastAndReadingCell = document.createElement('td');
        feastAndReadingCell.innerHTML = feastAndReadingContent;
        row.appendChild(feastAndReadingCell);

        reportTableBody.appendChild(row);

        // Chuy·ªÉn sang ng√†y ti·∫øp theo
        currentDay.setDate(currentDay.getDate() + 1);
    }
}


function displayMonthInfo() {
    // L·∫•y th√°ng v√† nƒÉm t·ª´ input c·ªßa ng∆∞·ªùi d√πng
    const month = parseInt(document.getElementById('monthInput').value);
    const year = parseInt(document.getElementById('yearInput').value);

    // T√≠nh s·ªë ng√†y trong th√°ng ƒë∆∞·ª£c ch·ªçn
    const daysInMonth = new Date(year, month, 0).getDate();

    // L·∫•y c√°c l·ªÖ trong nƒÉm
    const feasts = calculateFeasts(year);
    const secondFeasts = calculateSecondFeasts(year); // L·∫•y c√°c l·ªÖ v·ªçng (n·∫øu c√≥)

    // C·∫≠p nh·∫≠t n·ªôi dung c·ªßa th·∫ª <span id="yearDisplay"> ƒë·ªÉ hi·ªÉn th·ªã th√°ng/nƒÉm
    const yearDisplayElement = document.getElementById('yearDisplay');
    yearDisplayElement.textContent = `Th√°ng ${month} - NƒÉm ${year}`;

    // L·∫•y ph·∫ßn body c·ªßa b·∫£ng ƒë·ªÉ th√™m n·ªôi dung v√†o
    const reportTableBody = document.getElementById('reportTableBody');
    reportTableBody.innerHTML = ''; // X√≥a d·ªØ li·ªáu c≈© trong b·∫£ng

    // Bi·∫øn ƒë·ªÉ l∆∞u s·ªë tu·∫ßn hi·ªán t·∫°i
    let lastWeekNumber = -1;

    // L·∫∑p qua t·ª´ng ng√†y trong th√°ng
    for (let day = 1; day <= daysInMonth; day++) {
        const currentDate = new Date(year, month - 1, day);
        const currentWeekNumber = Math.ceil((day - currentDate.getDay() + 1) / 7); // S·ªë tu·∫ßn trong th√°ng

        // Th√™m ngƒÉn c√°ch gi·ªØa c√°c tu·∫ßn n·∫øu s·ªë tu·∫ßn thay ƒë·ªïi
        if (currentWeekNumber !== lastWeekNumber && lastWeekNumber !== -1) {
            const separatorRow = document.createElement('tr');
            separatorRow.classList.add('week-separator');
            const separatorCell = document.createElement('td');
            separatorCell.colSpan = 4; // S·ªë c·ªôt trong b·∫£ng
            separatorRow.appendChild(separatorCell);
            reportTableBody.appendChild(separatorRow);
        }
        lastWeekNumber = currentWeekNumber;

        // T·∫°o h√†ng m·ªõi trong b·∫£ng cho m·ªói ng√†y
        const row = document.createElement('tr');

        // L·∫•y th√¥ng tin l·ªÖ, m√†u √°o l·ªÖ v√† b√†i ƒë·ªçc cho ng√†y hi·ªán t·∫°i
        let feastAndReadingContent = '';
        const feast = getFeastForDay(currentDate, feasts); // L·∫•y th√¥ng tin l·ªÖ
        const chasuble = calculateChasuble(year).getChasubleForDay(currentDate); // L·∫•y m√†u √°o l·ªÖ

        // Th√™m th√¥ng tin v·ªÅ ng√†y l·ªÖ ch√≠nh
        if (feast) {
            feastAndReadingContent += formatFeastName(feast.name) + '<br>';
        } else {
            feastAndReadingContent += 'Kh√¥ng c√≥ l·ªÖ ƒë·∫∑c bi·ªát<br>';
        }

        // Th√™m b√†i ƒë·ªçc v√†o sau th√¥ng tin l·ªÖ
        const readingContent = showfordayContent(currentDate); // G·ªçi h√†m showfordayContent ƒë·ªÉ l·∫•y n·ªôi dung b√†i ƒë·ªçc
        if (readingContent) {
            feastAndReadingContent += `<div class="readable" onclick="showReadingContent('${currentDate.toISOString()}')">${readingContent}</div>`;
        } else {
            feastAndReadingContent += 'Kh√¥ng c√≥ b√†i ƒë·ªçc';  // N·∫øu kh√¥ng c√≥ b√†i ƒë·ªçc
        }

        // T√≠nh to√°n v√† th√™m l·ªÖ v·ªçng (second feast)
        const secondFeast = getSecondFeastsForDate(currentDate, secondFeasts);
        if (secondFeast) {
            feastAndReadingContent += '<br>' + formatFeastName(secondFeast.name) + '<br>';
        }

        // Th√™m b√†i ƒë·ªçc ph·ª• v√†o sau ph·∫ßn ng√†y l·ªÖ
        const reading1 = showOptionContent(currentDate); // G·ªçi h√†m showOptionContent ƒë·ªÉ l·∫•y b√†i ƒë·ªçc ph·ª•
        if (reading1 && reading1 !== "1") {
            feastAndReadingContent += `
                <div class="readable" onclick="showBibleOptionContent('${currentDate.toISOString()}')">
                    ${reading1}
                </div>`;
        }

        // Ng√†y d∆∞∆°ng l·ªãch v√† √¢m l·ªãch ƒë∆∞·ª£c hi·ªÉn th·ªã trong c√πng m·ªôt √¥
        const solarDateCell = document.createElement('td');
        const lunarDate = convertToLunarDate({ day, month, year });

        // Hi·ªÉn th·ªã ng√†y d∆∞∆°ng l·ªãch v·ªõi ch·ªØ ƒë·∫≠m v√† ng√†y √¢m l·ªãch v·ªõi m√†u xanh ƒë·∫≠m
        solarDateCell.innerHTML = `<strong>${day}/${month}</strong><br><em><span style="color: darkblue;">(${lunarDate.day}/${lunarDate.month})</span></em>`;
        row.appendChild(solarDateCell);

        // M√†u √°o l·ªÖ
        const chasubleCell = document.createElement('td');
        chasubleCell.innerHTML = `<strong>${chasuble || 'Xanh'}</strong>`; // Hi·ªÉn th·ªã m√†u √°o l·ªÖ, n·∫øu kh√¥ng c√≥ th√¨ m·∫∑c ƒë·ªãnh l√† 'Xanh'
        row.appendChild(chasubleCell);

        // Th√¥ng tin l·ªÖ v√† b√†i ƒë·ªçc
        const feastAndReadingCell = document.createElement('td');
        feastAndReadingCell.innerHTML = feastAndReadingContent;
        row.appendChild(feastAndReadingCell);


        // N·∫øu l√† Ch·ªß Nh·∫≠t, th√™m hi·ªáu ·ª©ng 3D
        if (currentDate.getDay() === 0) {
            row.classList.add('sunday');
        }

        // G√°n l·ªõp m√†u n·ªÅn cho h√†ng theo chasuble
        const chasubleClass = getChasubleClass(chasuble);
        if (chasubleClass) {
            row.classList.add(chasubleClass);
        }

        // Th√™m h√†ng v√†o b·∫£ng
        reportTableBody.appendChild(row);

        // Chuy·ªÉn sang ng√†y ti·∫øp theo
        currentDate.setDate(currentDate.getDate() + 1);
    }
}



                // c√°c h√†m ph·ª• tr·ª£ cho hi·ªÉn th·ªã
                        // xu·ªëng 1.5 h√†ng khi g·∫∑p k√Ω t·ª± trong b√†i ƒë·ªçc
                        function formatWithLineBreaks(text) {
                            if (!text) return ''; // Ki·ªÉm tra chu·ªói tr·ªëng
                            // S·ª≠ d·ª•ng div v·ªõi line-height ƒë·ªÉ t·∫°o kho·∫£ng c√°ch d√≤ng l·ªõn h∆°n
                            return text.replace(/(\r\n|\n|\r)/g, '<div style="line-height: 2;"></div>'); 
                        }


                        // H√†m ph·ª• tr·ª£ ƒë·ªÉ ƒë·ªãnh d·∫°ng t·ª´ng b√†i ƒë·ªçc (b√†i ƒë·ªçc I, II, Tin M·ª´ng)
                        function formatReadingPart(title, readingPart) {
                            if (!readingPart) return `<strong style="color: red;"> ${title}:</strong> Not available<br><br>`;
                            
                            return `
                                <br><strong style="color: red;">${title}:</strong> ${formatWithLineBreaks(readingPart.excerpt)} <br>
                                <br><em>${formatWithLineBreaks(readingPart.info || '')}</em><br>
                                <br><strong>${formatWithLineBreaks(readingPart.title || '')}</strong><br>
                                <br>${formatWithLineBreaks(readingPart.content || '')}<br>
                                <br><strong>${formatWithLineBreaks(readingPart.end || '')}</strong><br><br>
                            `;
                        }

                        // H√†m ph·ª• tr·ª£ ƒë·ªÉ ƒë·ªãnh d·∫°ng ph·∫ßn ƒê√°p ca
                        function formatPsalms(psalms) {
                            if (!psalms) return '<strong>ƒê√°p ca:</strong> Not available<br><br>';
                            
                            return `
                                <strong style="color: red;"> ƒê√°p ca:</strong> ${formatWithLineBreaks(psalms.excerpt)} <br>
                                <br><strong>${formatWithLineBreaks(psalms.response)}</strong><br>
                                <br><em>${psalms.verses.map(formatWithLineBreaks).join('<br><br>')}</em><br><br>
                            `;
                        }

                        // H√†m ph·ª• tr·ª£ ƒë·ªÉ ƒë·ªãnh d·∫°ng ph·∫ßn X∆∞·ªõng tr∆∞·ªõc Tin M·ª´ng
                        function formatAlleluia(alleluia) {
                            if (!alleluia) return '<strong style="color: red;">X∆∞·ªõng tr∆∞·ªõc Tin M·ª´ng:</strong> Not available<br><br>';
                            
                            return `
                                <strong style="color: red;"> X∆∞·ªõng tr∆∞·ªõc Tin M·ª´ng:</strong> ${formatWithLineBreaks(alleluia.verse)} <br>
                                <br><strong>${formatWithLineBreaks(alleluia.content)}</strong><br><br>
                            `;
                        }
      
      // C√°c H√†m li√™n quan b√†i ƒë·ªçc ch√≠nh
        // H√†m hi·ªÉn th·ªã n·ªôi dung b√†i ƒë·ªçc ch√≠nh
        function showReadingContent(dateString) {
            const date = new Date(dateString);  // Chuy·ªÉn ƒë·ªïi chu·ªói th√†nh ƒë·ªëi t∆∞·ª£ng Date
            const reading = getBibleByFourDigitCode(date);  // L·∫•y b√†i ƒë·ªçc
            const year = date.getFullYear();
            const feasts = calculateFeasts(year); // L·∫•y danh s√°ch l·ªÖ
            updateModalTitle(date, feasts); // C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ modal
            if (reading) {
                // Bi·∫øn l∆∞u tr·ªØ n·ªôi dung b√†i ƒë·ªçc v·ªõi c√°c ƒëi·ªÅu ki·ªán ki·ªÉm tra t·ª´ng ph·∫ßn
                const readingContent = `
                    ${formatReadingPart('B√†i ƒê·ªçc I', reading.firstReading)}
                    ${formatPsalms(reading.psalms)}
                    ${reading.secondReading ? formatReadingPart('B√†i ƒê·ªçc II', reading.secondReading) : ''} 
                    ${formatAlleluia(reading.alleluia)}
                    ${formatReadingPart('Tin M·ª´ng', reading.gospel)}
                `;

                // Hi·ªÉn th·ªã n·ªôi dung b√†i ƒë·ªçc trong ph·∫ßn t·ª≠ HTML c√≥ ID l√† "readingContent"
                document.getElementById("readingContent").innerHTML = readingContent;
            } else {
                // Kh√¥ng c√≥ b√†i ƒë·ªçc, hi·ªÉn th·ªã th√¥ng b√°o
                document.getElementById("readingContent").innerHTML = "Kh√¥ng c√≥ b√†i ƒë·ªçc.";
            }

            // Hi·ªÉn th·ªã modal v√† overlay
            document.getElementById("readingModal").style.display = "block"; 
            document.getElementById("modalOverlay").style.display = "block"; 
        }
        // H√†m hi·ªÉn th·ªã t√™n b√†i ƒë·ªçc ch√≠nh
        function showfordayContent(date) {
            const reading = getBibleByFourDigitCode(date); // G·ªçi h√†m ƒë·ªÉ l·∫•y b√†i ƒë·ªçc
            if (reading) {
                // Lo·∫°i b·ªè (NƒÉm I) ho·∫∑c (NƒÉm II) b·∫•t k·ªÉ ch·ªØ hoa hay ch·ªØ th∆∞·ªùng
                const reading1 = reading.firstReading ? `${reading.firstReading.excerpt.replace(/\(nƒÉm i\)|\(nƒÉm ii\)/gi, '').trim()}; ` : 'Kh√¥ng c√≥ B√†i ƒê·ªçc I';
                const psalm = reading.psalms ? `${reading.psalms.excerpt}; ` : 'Kh√¥ng c√≥ Th√°nh V·ªãnh';
                const reading2 = reading.secondReading ? `${reading.secondReading.excerpt}; ` : '';
                const gospel = reading.gospel ? `${reading.gospel.excerpt}` : 'Kh√¥ng c√≥ Tin M·ª´ng';

                // K·∫øt h·ª£p t·∫•t c·∫£ c√°c ph·∫ßn v√†o m·ªôt chu·ªói
                const readingContent = `${reading1}${psalm}${reading2}${gospel}`;


                // Tr·∫£ v·ªÅ chu·ªói n·ªôi dung b√†i ƒë·ªçc
                return readingContent;
            } else {
                return; // Tr·∫£ v·ªÅ chu·ªói th√¥ng b√°o
        }
    }
      // C√°c h√†m li√™n quan b√†i ƒë·ªçc ph·ª•
          // H√†m hi·ªÉn th·ªã n·ªôi dung b√†i ƒë·ªçc ph·ª•
            function showBibleOptionContent(dateString) {
                const date = new Date(dateString);
                const reading = getBibleByOptionDigitCode(date);  // L·∫•y b√†i ƒë·ªçc
                const year = date.getFullYear();
                const feasts = calculateFeasts(year); // L·∫•y danh s√°ch l·ªÖ
                updateModalTitle1(date, feasts); // C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ modal

                if (reading) {
                    // Bi·∫øn l∆∞u tr·ªØ n·ªôi dung b√†i ƒë·ªçc v·ªõi c√°c ƒëi·ªÅu ki·ªán ki·ªÉm tra t·ª´ng ph·∫ßn
                    const readingContent = `
                        ${formatReadingPart('B√†i ƒê·ªçc I', reading.firstReading)}
                        ${formatPsalms(reading.psalms)}
                        ${reading.secondReading ? formatReadingPart('B√†i ƒê·ªçc II', reading.secondReading) : ''} 
                        ${formatAlleluia(reading.alleluia)}
                        ${formatReadingPart('Tin M·ª´ng', reading.gospel)}
                   `;

                    // Hi·ªÉn th·ªã n·ªôi dung b√†i ƒë·ªçc trong ph·∫ßn t·ª≠ HTML c√≥ ID l√† "readingContent"
                    document.getElementById("readingContent").innerHTML = readingContent;
                } else {
                    return "1";
                }

                // Hi·ªÉn th·ªã modal v√† overlay
                document.getElementById("readingModal").style.display = "block"; 
                document.getElementById("modalOverlay").style.display = "block"; 

            }

                // H√†m hi·ªÉn th·ªã t√™n b√†i ƒë·ªçc ph·ª•
            function showOptionContent(date) {
                const reading = getBibleByOptionDigitCode(date); // t·∫°i sao b√°o l·ªói h√†m ch∆∞a ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a???
               if (reading) {
                    const reading1 = reading.firstReading ? `${reading.firstReading.excerpt}; ` : 'Kh√¥ng c√≥ B√†i ƒê·ªçc I';
                    const psalm = reading.psalms ? `${reading.psalms.excerpt}; ` : 'Kh√¥ng c√≥ Th√°nh V·ªãnh';
                    const reading2 = reading.secondReading ? `${reading.secondReading.excerpt}; ` : '';
                    const gospel = reading.gospel ? `${reading.gospel.excerpt}` : '';

                    // K·∫øt h·ª£p t·∫•t c·∫£ c√°c ph·∫ßn v√†o m·ªôt chu·ªói
                    const readingContent = `${reading1}${psalm}${reading2}${gospel}`;
                     return readingContent;
                } else {
                    return '';
                }
            }



        // c√¢u th√°nh kinh info cho ng√†y hi·ªÉn th·ªã
        function showfordayContentinfo(date) {
            const reading = getBibleByFourDigitCode(date); // G·ªçi h√†m ƒë·ªÉ l·∫•y b√†i ƒë·ªçc
            if (reading) {
            
                const Infogospel = reading.gospel ? `${reading.gospel.info}` : '';
                // Tr·∫£ v·ªÅ chu·ªói n·ªôi dung b√†i ƒë·ªçc
                return Infogospel;
            } else {
                return; // Tr·∫£ v·ªÅ chu·ªói th√¥ng b√°o
            }
        }


        // H√†m ƒë·ªãnh d·∫°ng t√™n l·ªÖ theo y√™u c·∫ßu
        function formatFeastName(feastName) {
            if (feastName.includes("L·ªÖ nh·ªõ")) {
                const feastParts = feastName.split('.');
                if (feastParts.length > 1) {
                    const firstPart = feastParts[0] + '.';
                    const secondPart = feastParts.slice(1).join('.');
                    return `${firstPart} <span class="feast-bold">${secondPart}</span>`;
                } else {
                    return feastName;
                }
            } else if (feastName.includes("L·ªÖ k√≠nh")) {
                return feastName.replace("L·ªÖ k√≠nh", `<span class="feast-bold">L·ªÖ k√≠nh</span>`);
            } else if (feastName.includes("CH√öA NH·∫¨T")) {
                const feastParts = feastName.split('.');
                if (feastParts.length > 1) {
                    const firstPart = feastParts[0] + '.';
                    const secondPart = feastParts.slice(1).join('.');
                    return `<span class="feast-bold"> ${firstPart}</span> ${secondPart}`;
                }
            } else if (feastName.includes("L·ªÖ tr·ªçng")) {
                return `<span class="feast-bold">${feastName}</span>`;
            }
            return feastName;
        }

        // H√†m chuy·ªÉn ƒë·ªïi m√†u Chasuble th√†nh l·ªõp CSS cho m√†u n·ªÅn
        function getChasubleClass(chasuble) {
            switch (chasuble) {
                case 'Tr': return 'bg-Tr'; // M√†u tr·∫Øng
                case 'Tm': return 'bg-Tm'; // M√†u t√≠m
                case 'ƒê': return 'bg-ƒê';   // ƒê·ªè nh·∫π
                case 'X': return 'bg-X';   // Xanh l√° c√¢y
                default: return '';        // Kh√¥ng c√≥ m√†u
            }
        }

        // H√†m chuy·ªÉn chu·ªói ng√†y th√†nh ƒë·ªëi t∆∞·ª£ng ng√†y
        function parseDate(dateString) {
            const [day, month, year] = dateString.split('/').map(Number);
            return { day, month, year };
        }

        // H√†m chuy·ªÉn ƒë·ªïi ng√†y d∆∞∆°ng l·ªãch sang ng√†y √¢m l·ªãch
        function convertToLunarDate({ day, month, year }) {
            const lunarDate = getLunarDate(day, month, year);
            return lunarDate ? { day: lunarDate.day, month: lunarDate.month, year: lunarDate.year } : { day: '', month: '' };
        }

        // H√†m l·∫•y th√¥ng tin ng√†y l·ªÖ t·ª´ danh s√°ch feasts
        function getFeastForDay(solarDate, feasts) {
            for (let feast of feasts) {
                if (feast.date && solarDate.getDate() === feast.date.getDate() &&
                    solarDate.getMonth() === feast.date.getMonth() &&
                    solarDate.getFullYear() === feast.date.getFullYear()) {
                    return feast;
                }
            }
            return null;
        }
        function getSecondFeastsForDate(date, secondFeasts) {
            for (let secondFeast of secondFeasts) {
                if (secondFeast.date &&
                    date.getDate() === secondFeast.date.getDate() &&
                    date.getMonth() === secondFeast.date.getMonth() &&
                    date.getFullYear() === secondFeast.date.getFullYear()) {
                    return secondFeast; // Tr·∫£ v·ªÅ l·ªÖ v·ªçng n·∫øu ng√†y kh·ªõp
                }
            }
            return null; // Tr·∫£ v·ªÅ null n·∫øu kh√¥ng c√≥ l·ªÖ v·ªçng
        }

                // H√†m c·∫≠p nh·∫≠t th√¥ng tin ng√†y th√°ng v√† t√™n l·ªÖ trong modal
            function updateModalTitle(date, feasts) {
                const day = date.getDate();
                const month = date.getMonth() + 1; // Th√°ng trong JavaScript b·∫Øt ƒë·∫ßu t·ª´ 0
                const year = date.getFullYear();

                // L·∫•y t√™n l·ªÖ t·ª´ danh s√°ch feasts cho ng√†y hi·ªán t·∫°i
                const feast = getFeastForDay(date, feasts);
                const feastName = feast ? feast.name : 'Kh√¥ng c√≥ l·ªÖ ƒë·∫∑c bi·ªát';

                // C·∫≠p nh·∫≠t th·∫ª <h3> trong modal
                document.querySelector("#readingModal h3").textContent = `B√†i ƒê·ªçc Ng√†y: ${day}/${month}/${year} - ${feastName}`;
            }
            function updateModalTitle1(date, secondFeasts, feasts) {
                    const day = date.getDate();
                    const month = date.getMonth() + 1; // Th√°ng trong JavaScript b·∫Øt ƒë·∫ßu t·ª´ 0
                    const year = date.getFullYear();

                    // L·∫•y c√°c l·ªÖ v·ªçng
                    const secondFeast1 = calculateSecondFeasts(year); 

                    // L·∫•y l·ªÖ v·ªçng t·ª´ danh s√°ch secondFeasts cho ng√†y hi·ªán t·∫°i
                    const secondFeast = getSecondFeastsForDate(date, secondFeast1);
                    // N·∫øu c√≥ l·ªÖ v·ªçng, l·∫•y t√™n l·ªÖ v·ªçng; n·∫øu kh√¥ng, hi·ªÉn th·ªã l·ªÖ ch√≠nh
                    let feastName;
                    if (secondFeast && secondFeast.name) {
                        feastName = secondFeast.name; // L·∫•y t√™n l·ªÖ v·ªçng
                    } else {
                        const feasts = calculateFeasts(year);
                        const feast = getFeastForDay(date, feasts); // L·∫•y l·ªÖ ch√≠nh n·∫øu kh√¥ng c√≥ l·ªÖ v·ªçng
                        feastName = feast ? feast.name : 'Kh√¥ng c√≥ l·ªÖ ƒë·∫∑c bi·ªát';
                        feastName = feastName.replace(/Th·ª© Hai\.|Th·ª© Ba\.|Th·ª© T∆∞\.|Th·ª© NƒÉm\.|Th·ª© S√°u\.|Th·ª© B·∫£y\./g, '').trim();

                        // Th√™m chu·ªói "V·ªÅ v·ªã th√°nh" v√†o tr∆∞·ªõc t√™n l·ªÖ ch√≠nh
                        feastName = "V·ªÅ L·ªÖ " + feastName;
                    }

                    // C·∫≠p nh·∫≠t th·∫ª <h3> trong modal
                    document.querySelector("#readingModal h3").textContent = `B√†i ƒê·ªçc Ng√†y: ${day}/${month}/${year} - ${feastName}`;
                }

// TƒÉng k√≠ch th∆∞·ªõc font
function increaseFontSize() {
    var content = document.getElementById('readingContent');
    var currentSize = window.getComputedStyle(content, null).getPropertyValue('font-size');
    var newSize = parseFloat(currentSize) + 2;
    content.style.fontSize = newSize + 'px';
}

// Gi·∫£m k√≠ch th∆∞·ªõc font
function decreaseFontSize() {
    var content = document.getElementById('readingContent');
    var currentSize = window.getComputedStyle(content, null).getPropertyValue('font-size');
    var newSize = parseFloat(currentSize) - 2;
    content.style.fontSize = newSize + 'px';
}


// H√†m b√¥i ƒë·∫≠m n·ªôi dung (Bold)
function boldText() {
    // L·∫•y ph·∫ßn n·ªôi dung c·ªßa modal
    var content = document.getElementById('readingContent');
    
    // Ki·ªÉm tra n·∫øu n·ªôi dung ƒë√£ ƒë∆∞·ª£c b√¥i ƒë·∫≠m hay ch∆∞a
    if (content.style.fontWeight === 'bold') {
        content.style.fontWeight = 'normal'; // N·∫øu ƒë√£ ƒë·∫≠m th√¨ chuy·ªÉn v·ªÅ b√¨nh th∆∞·ªùng
    } else {
        content.style.fontWeight = 'bold'; // N·∫øu ch∆∞a ƒë·∫≠m th√¨ b√¥i ƒë·∫≠m
    }
}

            const liturgicalYears = ['A', 'B', 'C'];

            // H√†m t√≠nh to√°n v√† tr·∫£ v·ªÅ chu k·ª≥ nƒÉm ph·ª•ng v·ª• (A, B ho·∫∑c C)
            function getLiturgicalYear(year) {
                const startYear = 2020; // NƒÉm b·∫Øt ƒë·∫ßu cho chu k·ª≥
                const cycleLength = 3;  // Chu k·ª≥ l·∫∑p l·∫°i m·ªói 3 nƒÉm
                const yearOffset = year - startYear;
                const cycle = (yearOffset % cycleLength + cycleLength) % cycleLength;
                return liturgicalYears[cycle];
            }

</script>

</body>
</html>
